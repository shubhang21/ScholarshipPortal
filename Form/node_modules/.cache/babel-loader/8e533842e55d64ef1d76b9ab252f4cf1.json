{"ast":null,"code":"import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, getTabIndex } from '@progress/kendo-react-common';\nimport { useLocalization } from '@progress/kendo-react-intl';\nimport { dropZoneHint, dropZoneNote, messages } from './messages';\nimport { validatePackage } from '@progress/kendo-licensing';\nimport { packageMetadata } from './package-metadata';\n/**\n * @hidden\n */\n\nvar TIME_TO_CHECK_DRAG = 100;\n/**\n * Represents the ExternalDropZone component.\n */\n\nexport var ExternalDropZone = React.forwardRef(function (props, ref) {\n  validatePackage(packageMetadata);\n  var target = React.useRef(null);\n  var externalDropZoneRef = React.useRef(null);\n  var elementIntervalRef = React.useRef(null);\n  var elementActiveRef = React.useRef(false);\n  var lastElementDragOverRef = React.useRef(null);\n\n  var _a = React.useState(false),\n      overDropZone = _a[0],\n      setOverDropZone = _a[1];\n\n  var localization = useLocalization();\n  var localizedHint = localization.toLanguageString(dropZoneHint, messages[dropZoneHint]);\n  var localizedNote = localization.toLanguageString(dropZoneNote, messages[dropZoneNote]);\n  var hintElement = props.customHint || React.createElement(\"span\", null, localizedHint);\n  var noteElement = props.customNote || React.createElement(\"span\", null, localizedNote);\n  var uploadRef = props.uploadRef;\n  var focus = React.useCallback(function () {\n    if (externalDropZoneRef.current) {\n      externalDropZoneRef.current.focus();\n    }\n  }, [externalDropZoneRef]);\n  React.useImperativeHandle(target, function () {\n    return {\n      element: externalDropZoneRef.current,\n      focus: focus,\n      props: props\n    };\n  });\n  React.useImperativeHandle(ref, function () {\n    return target.current;\n  });\n  var isDragOver = React.useCallback(function (prevDate) {\n    return new Date().getTime() - (prevDate || new Date()).getTime() > TIME_TO_CHECK_DRAG;\n  }, []);\n  var handleOnDrop = React.useCallback(function (event) {\n    event.preventDefault();\n    var droppedFiles = event.dataTransfer.files;\n\n    if (droppedFiles.length > 0 && !props.disabled && uploadRef && uploadRef.current) {\n      if (uploadRef.current.onAdd) {\n        event.preventDefault();\n        uploadRef.current.onAdd(droppedFiles);\n      }\n    }\n  }, [props.disabled, uploadRef]);\n  var handleOnElementDragEnter = React.useCallback(function () {\n    if (elementActiveRef) {\n      elementActiveRef.current = true;\n\n      var locElementInterval = function () {\n        if (isDragOver(lastElementDragOverRef.current)) {\n          setOverDropZone(false);\n          elementActiveRef.current = false;\n          clearInterval(elementIntervalRef.current);\n          elementIntervalRef.current = null;\n          lastElementDragOverRef.current = null;\n        }\n      };\n\n      elementIntervalRef.current = setInterval(locElementInterval, TIME_TO_CHECK_DRAG);\n    }\n  }, [elementActiveRef, elementIntervalRef, lastElementDragOverRef]);\n  var handleOnElementDragOver = React.useCallback(function (event) {\n    event.preventDefault();\n    lastElementDragOverRef.current = new Date();\n    setOverDropZone(true);\n  }, [lastElementDragOverRef]);\n  return React.createElement(\"div\", {\n    ref: externalDropZoneRef,\n    id: props.id,\n    className: classNames('k-external-dropzone', {\n      'k-external-dropzone-hover': overDropZone,\n      'k-state-disabled': props.disabled\n    }, props.className),\n    tabIndex: getTabIndex(props.tabIndex, props.disabled, undefined),\n    onDrop: handleOnDrop,\n    onDragEnter: handleOnElementDragEnter,\n    onDragOver: handleOnElementDragOver\n  }, React.createElement(\"div\", {\n    style: props.style,\n    className: 'k-dropzone-inner'\n  }, React.createElement(\"span\", {\n    className: 'k-icon k-i-upload'\n  }), React.createElement(\"span\", {\n    className: 'k-dropzone-hint'\n  }, hintElement), React.createElement(\"span\", {\n    className: 'k-dropzone-note'\n  }, noteElement)));\n});\nvar propTypes = {\n  id: PropTypes.string,\n  tabIndex: PropTypes.number,\n  editorRef: PropTypes.oneOfType([PropTypes.func, PropTypes.shape({\n    current: PropTypes.any\n  })]),\n  disabled: PropTypes.bool\n};\nExternalDropZone.displayName = 'KendoReactExternalDropZone'; // TODO: delete casting when @types/react is updated!\n\nExternalDropZone.propTypes = propTypes;","map":{"version":3,"sources":["../../src/ExternalDropZone.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["import * as React from 'react';\nimport * as PropTypes from 'prop-types';\nimport { classNames, getTabIndex } from '@progress/kendo-react-common';\nimport { useLocalization } from '@progress/kendo-react-intl';\nimport { dropZoneHint, dropZoneNote, messages } from './messages';\nimport { validatePackage } from '@progress/kendo-licensing';\nimport { packageMetadata } from './package-metadata';\n/**\n * @hidden\n */\nvar TIME_TO_CHECK_DRAG = 100;\n/**\n * Represents the ExternalDropZone component.\n */\nexport var ExternalDropZone = React.forwardRef(function (props, ref) {\n    validatePackage(packageMetadata);\n    var target = React.useRef(null);\n    var externalDropZoneRef = React.useRef(null);\n    var elementIntervalRef = React.useRef(null);\n    var elementActiveRef = React.useRef(false);\n    var lastElementDragOverRef = React.useRef(null);\n    var _a = React.useState(false), overDropZone = _a[0], setOverDropZone = _a[1];\n    var localization = useLocalization();\n    var localizedHint = localization.toLanguageString(dropZoneHint, messages[dropZoneHint]);\n    var localizedNote = localization.toLanguageString(dropZoneNote, messages[dropZoneNote]);\n    var hintElement = props.customHint || React.createElement(\"span\", null, localizedHint);\n    var noteElement = props.customNote || React.createElement(\"span\", null, localizedNote);\n    var uploadRef = props.uploadRef;\n    var focus = React.useCallback(function () {\n        if (externalDropZoneRef.current) {\n            externalDropZoneRef.current.focus();\n        }\n    }, [externalDropZoneRef]);\n    React.useImperativeHandle(target, function () { return ({\n        element: externalDropZoneRef.current,\n        focus: focus,\n        props: props\n    }); });\n    React.useImperativeHandle(ref, function () { return target.current; });\n    var isDragOver = React.useCallback(function (prevDate) {\n        return (new Date().getTime() - (prevDate || new Date()).getTime()) > TIME_TO_CHECK_DRAG;\n    }, []);\n    var handleOnDrop = React.useCallback(function (event) {\n        event.preventDefault();\n        var droppedFiles = event.dataTransfer.files;\n        if (droppedFiles.length > 0 && !props.disabled && uploadRef && uploadRef.current) {\n            if (uploadRef.current.onAdd) {\n                event.preventDefault();\n                uploadRef.current.onAdd(droppedFiles);\n            }\n        }\n    }, [props.disabled, uploadRef]);\n    var handleOnElementDragEnter = React.useCallback(function () {\n        if (elementActiveRef) {\n            elementActiveRef.current = true;\n            var locElementInterval = function () {\n                if (isDragOver(lastElementDragOverRef.current)) {\n                    setOverDropZone(false);\n                    elementActiveRef.current = false;\n                    clearInterval(elementIntervalRef.current);\n                    elementIntervalRef.current = null;\n                    lastElementDragOverRef.current = null;\n                }\n            };\n            elementIntervalRef.current = setInterval(locElementInterval, TIME_TO_CHECK_DRAG);\n        }\n    }, [elementActiveRef, elementIntervalRef, lastElementDragOverRef]);\n    var handleOnElementDragOver = React.useCallback(function (event) {\n        event.preventDefault();\n        lastElementDragOverRef.current = new Date();\n        setOverDropZone(true);\n    }, [lastElementDragOverRef]);\n    return (React.createElement(\"div\", { ref: externalDropZoneRef, id: props.id, className: classNames('k-external-dropzone', {\n            'k-external-dropzone-hover': overDropZone,\n            'k-state-disabled': props.disabled\n        }, props.className), tabIndex: getTabIndex(props.tabIndex, props.disabled, undefined), onDrop: handleOnDrop, onDragEnter: handleOnElementDragEnter, onDragOver: handleOnElementDragOver },\n        React.createElement(\"div\", { style: props.style, className: 'k-dropzone-inner' },\n            React.createElement(\"span\", { className: 'k-icon k-i-upload' }),\n            React.createElement(\"span\", { className: 'k-dropzone-hint' }, hintElement),\n            React.createElement(\"span\", { className: 'k-dropzone-note' }, noteElement))));\n});\nvar propTypes = {\n    id: PropTypes.string,\n    tabIndex: PropTypes.number,\n    editorRef: PropTypes.oneOfType([\n        PropTypes.func,\n        PropTypes.shape({ current: PropTypes.any })\n    ]),\n    disabled: PropTypes.bool\n};\nExternalDropZone.displayName = 'KendoReactExternalDropZone';\n// TODO: delete casting when @types/react is updated!\nExternalDropZone.propTypes = propTypes;\n//# sourceMappingURL=ExternalDropZone.js.map"]},"metadata":{},"sourceType":"module"}