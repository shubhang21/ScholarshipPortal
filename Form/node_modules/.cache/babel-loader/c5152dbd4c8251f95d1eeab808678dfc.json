{"ast":null,"code":"var __extends = this && this.__extends || function () {\n  var extendStatics = function (d, b) {\n    extendStatics = Object.setPrototypeOf || {\n      __proto__: []\n    } instanceof Array && function (d, b) {\n      d.__proto__ = b;\n    } || function (d, b) {\n      for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    };\n\n    return extendStatics(d, b);\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nimport * as React from 'react';\nimport { classNames } from '@progress/kendo-react-common';\nimport { provideLocalizationService, registerForLocalization } from '@progress/kendo-react-intl';\nimport { messages, dropFilesHere } from './messages';\nimport utils from './utils/utils';\nimport { UploadStatus } from './UploadStatus';\n/**\n * @hidden\n */\n\nvar TIME_TO_CHECK_DRAG = 100;\n/**\n * @hidden\n */\n\nvar UploadDropZone =\n/** @class */\nfunction (_super) {\n  __extends(UploadDropZone, _super);\n\n  function UploadDropZone() {\n    var _this = _super !== null && _super.apply(this, arguments) || this;\n\n    _this._documentActive = false;\n    _this._elementActive = false;\n\n    _this.onDocumentDragEnter = function () {\n      if (!_this.documentActive) {\n        _this.documentActive = true;\n\n        var documentInterval = function () {\n          if (_this.isDragOver(_this._lastDocumentDragOver)) {\n            _this.documentActive = false;\n            clearInterval(_this._documentInterval);\n            _this._documentInterval = null;\n            _this._lastDocumentDragOver = null;\n          }\n        };\n\n        _this._documentInterval = setInterval(documentInterval, TIME_TO_CHECK_DRAG);\n      }\n    };\n\n    _this.onDocumentDragOver = function () {\n      _this._lastDocumentDragOver = new Date();\n    };\n\n    _this.onElementDragEnter = function () {\n      if (!_this.elementActive) {\n        _this.elementActive = true;\n\n        var elementInterval = function () {\n          if (_this.isDragOver(_this._lastElementDragOver)) {\n            _this.elementActive = false;\n            clearInterval(_this._elementInterval);\n            _this._elementInterval = null;\n            _this._lastElementDragOver = null;\n          }\n        };\n\n        _this._elementInterval = setInterval(elementInterval, TIME_TO_CHECK_DRAG);\n      }\n    };\n\n    _this.onElementDragOver = function (event) {\n      event.preventDefault();\n      _this._lastElementDragOver = new Date();\n    };\n\n    _this.onDrop = function (event) {\n      event.preventDefault();\n      var droppedFiles = event.dataTransfer.files;\n\n      if (droppedFiles.length > 0 && !_this.props.disabled && _this.props.onAdd) {\n        _this.props.onAdd.call(undefined, droppedFiles);\n      }\n    };\n\n    _this.isDragOver = function (prevDate) {\n      return new Date().getTime() - (prevDate || new Date()).getTime() > TIME_TO_CHECK_DRAG;\n    };\n\n    return _this;\n  }\n\n  Object.defineProperty(UploadDropZone.prototype, \"documentActive\", {\n    get: function () {\n      return this._documentActive;\n    },\n    set: function (active) {\n      var prevActive = this.documentActive;\n      this._documentActive = active;\n\n      if (active !== prevActive) {\n        this.forceUpdate();\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n  Object.defineProperty(UploadDropZone.prototype, \"elementActive\", {\n    get: function () {\n      return this._elementActive;\n    },\n    set: function (active) {\n      var currentActive = this._elementActive;\n      this._elementActive = active;\n\n      if (active !== currentActive) {\n        this.setState({});\n      }\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  UploadDropZone.prototype.componentDidMount = function () {\n    document.addEventListener('dragenter', this.onDocumentDragEnter);\n    document.addEventListener('dragover', this.onDocumentDragOver);\n  };\n\n  UploadDropZone.prototype.componentWillUnmount = function () {\n    document.removeEventListener('dragenter', this.onDocumentDragEnter);\n    document.removeEventListener('dragover', this.onDocumentDragOver);\n  };\n\n  UploadDropZone.prototype.render = function () {\n    var _a = this.props,\n        addButtonComponent = _a.addButtonComponent,\n        fileGroup = _a.fileGroup;\n    var localizationService = provideLocalizationService(this);\n    var dropFilesMessage = localizationService.toLanguageString(dropFilesHere, messages[dropFilesHere]);\n    var className = classNames('k-dropzone', this.documentActive ? 'k-dropzone-active' : '', this.elementActive ? 'k-dropzone-hovered' : '');\n\n    var _b = utils.getFileStatus(fileGroup),\n        isUploading = _b[0],\n        isUploaded = _b[1],\n        isUploadFailed = _b[2],\n        isUploadValidationFailed = _b[3];\n\n    var dropZoneClassName = classNames('k-dropzone-hint', {// Unsure about that, since it hides the \"Drop Files Message\" when we remove all uploaded components.\n      // 'k-hidden': this.isDragged && !this.elementActive\n    });\n    return React.createElement(\"div\", {\n      className: className,\n      onDrop: this.onDrop,\n      onDragEnter: this.onElementDragEnter,\n      onDragOver: this.onElementDragOver\n    }, addButtonComponent, isUploading || isUploaded || isUploadFailed || isUploadValidationFailed ? React.createElement(UploadStatus, {\n      isUploading: isUploading,\n      isUploaded: isUploaded,\n      isUploadFailed: isUploadFailed\n    }) : React.createElement(\"div\", {\n      className: dropZoneClassName\n    }, dropFilesMessage));\n  };\n\n  return UploadDropZone;\n}(React.Component);\n\nexport { UploadDropZone };\nregisterForLocalization(UploadDropZone);","map":{"version":3,"sources":["../../src/UploadDropZone.tsx"],"names":[],"mappings":"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","sourceRoot":"","sourcesContent":["var __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nimport * as React from 'react';\nimport { classNames } from '@progress/kendo-react-common';\nimport { provideLocalizationService, registerForLocalization } from '@progress/kendo-react-intl';\nimport { messages, dropFilesHere } from './messages';\nimport utils from './utils/utils';\nimport { UploadStatus } from './UploadStatus';\n/**\n * @hidden\n */\nvar TIME_TO_CHECK_DRAG = 100;\n/**\n * @hidden\n */\nvar UploadDropZone = /** @class */ (function (_super) {\n    __extends(UploadDropZone, _super);\n    function UploadDropZone() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this._documentActive = false;\n        _this._elementActive = false;\n        _this.onDocumentDragEnter = function () {\n            if (!_this.documentActive) {\n                _this.documentActive = true;\n                var documentInterval = function () {\n                    if (_this.isDragOver(_this._lastDocumentDragOver)) {\n                        _this.documentActive = false;\n                        clearInterval(_this._documentInterval);\n                        _this._documentInterval = null;\n                        _this._lastDocumentDragOver = null;\n                    }\n                };\n                _this._documentInterval = setInterval(documentInterval, TIME_TO_CHECK_DRAG);\n            }\n        };\n        _this.onDocumentDragOver = function () {\n            _this._lastDocumentDragOver = new Date();\n        };\n        _this.onElementDragEnter = function () {\n            if (!_this.elementActive) {\n                _this.elementActive = true;\n                var elementInterval = function () {\n                    if (_this.isDragOver(_this._lastElementDragOver)) {\n                        _this.elementActive = false;\n                        clearInterval(_this._elementInterval);\n                        _this._elementInterval = null;\n                        _this._lastElementDragOver = null;\n                    }\n                };\n                _this._elementInterval = setInterval(elementInterval, TIME_TO_CHECK_DRAG);\n            }\n        };\n        _this.onElementDragOver = function (event) {\n            event.preventDefault();\n            _this._lastElementDragOver = new Date();\n        };\n        _this.onDrop = function (event) {\n            event.preventDefault();\n            var droppedFiles = event.dataTransfer.files;\n            if (droppedFiles.length > 0 && !_this.props.disabled && _this.props.onAdd) {\n                _this.props.onAdd.call(undefined, droppedFiles);\n            }\n        };\n        _this.isDragOver = function (prevDate) {\n            return (new Date().getTime() - (prevDate || new Date()).getTime()) > TIME_TO_CHECK_DRAG;\n        };\n        return _this;\n    }\n    Object.defineProperty(UploadDropZone.prototype, \"documentActive\", {\n        get: function () {\n            return this._documentActive;\n        },\n        set: function (active) {\n            var prevActive = this.documentActive;\n            this._documentActive = active;\n            if (active !== prevActive) {\n                this.forceUpdate();\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Object.defineProperty(UploadDropZone.prototype, \"elementActive\", {\n        get: function () {\n            return this._elementActive;\n        },\n        set: function (active) {\n            var currentActive = this._elementActive;\n            this._elementActive = active;\n            if (active !== currentActive) {\n                this.setState({});\n            }\n        },\n        enumerable: true,\n        configurable: true\n    });\n    UploadDropZone.prototype.componentDidMount = function () {\n        document.addEventListener('dragenter', this.onDocumentDragEnter);\n        document.addEventListener('dragover', this.onDocumentDragOver);\n    };\n    UploadDropZone.prototype.componentWillUnmount = function () {\n        document.removeEventListener('dragenter', this.onDocumentDragEnter);\n        document.removeEventListener('dragover', this.onDocumentDragOver);\n    };\n    UploadDropZone.prototype.render = function () {\n        var _a = this.props, addButtonComponent = _a.addButtonComponent, fileGroup = _a.fileGroup;\n        var localizationService = provideLocalizationService(this);\n        var dropFilesMessage = localizationService\n            .toLanguageString(dropFilesHere, messages[dropFilesHere]);\n        var className = classNames('k-dropzone', this.documentActive ? 'k-dropzone-active' : '', this.elementActive ? 'k-dropzone-hovered' : '');\n        var _b = utils.getFileStatus(fileGroup), isUploading = _b[0], isUploaded = _b[1], isUploadFailed = _b[2], isUploadValidationFailed = _b[3];\n        var dropZoneClassName = classNames('k-dropzone-hint', {\n        // Unsure about that, since it hides the \"Drop Files Message\" when we remove all uploaded components.\n        // 'k-hidden': this.isDragged && !this.elementActive\n        });\n        return (React.createElement(\"div\", { className: className, onDrop: this.onDrop, onDragEnter: this.onElementDragEnter, onDragOver: this.onElementDragOver },\n            addButtonComponent,\n            isUploading || isUploaded || isUploadFailed || isUploadValidationFailed\n                ? React.createElement(UploadStatus, { isUploading: isUploading, isUploaded: isUploaded, isUploadFailed: isUploadFailed })\n                : React.createElement(\"div\", { className: dropZoneClassName }, dropFilesMessage)));\n    };\n    return UploadDropZone;\n}(React.Component));\nexport { UploadDropZone };\nregisterForLocalization(UploadDropZone);\n//# sourceMappingURL=UploadDropZone.js.map"]},"metadata":{},"sourceType":"module"}